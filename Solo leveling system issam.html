<meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>نظام الصيّاد | Solo Leveling Style</title>

<!-- Leaflet (خريطة بلا مفتاح) -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="anonymous">
<script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin="anonymous"></script>

<style>
  :root{
    --bg:#000; --panel:#0b0f0c; --text:#9effa1; --muted:#6ddc76; --accent:#52ffa3; --danger:#ff4d4d; --card:#0f1511;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,Segoe UI,Roboto,Tahoma,Arial}
  header{padding:16px 12px;text-align:center;background:linear-gradient(90deg,#071,transparent,#071);position:sticky;top:0;z-index:5}
  h1{margin:0;font-size:22px;letter-spacing:1px}
  .container{padding:12px;max-width:980px;margin:auto}
  .tabs{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-bottom:12px}
  .tab-btn{padding:10px;border:1px solid #104e2d;background:#08140e;color:var(--text);border-radius:12px;cursor:pointer}
  .tab-btn.active{outline:2px solid var(--accent);box-shadow:0 0 0 2px #0a2}
  .panel{background:var(--panel);border:1px solid #0a2a18;border-radius:14px;padding:12px;margin-bottom:12px}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  .card{background:var(--card);border:1px solid #103; border-color:#143a26;border-radius:12px;padding:12px;flex:1;min-width:220px}
  .stat{display:flex;justify-content:space-between;margin:4px 0}
  .progress{width:100%;height:10px;background:#051; border-radius:999px;overflow:hidden}
  .progress>span{display:block;height:100%;background:linear-gradient(90deg,#36f,#0f8);transition:width .3s}
  .btn{background:#0a311b;color:var(--text);border:1px solid #165a35;border-radius:10px;padding:8px 12px;cursor:pointer}
  .btn:disabled{opacity:.5;cursor:default}
  .btn.danger{background:#3b0d0d;border-color:#6a1c1c}
  .grid{display:grid;gap:10px}
  .grid-2{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
  .list{display:grid;gap:10px}
  .log{max-height:240px;overflow:auto;background:#03170e;border:1px solid #0a2a18;border-radius:10px;padding:8px;font-size:14px}
  .log p{margin:6px 0}
  .badge{display:inline-block;background:#072b1a;border:1px solid #125b34;border-radius:999px;padding:2px 8px;font-size:12px;margin-inline-start:6px}
  .kv{display:grid;grid-template-columns:120px 1fr;gap:6px;font-size:14px}
  #map{height:360px;border-radius:12px;border:1px solid #124}
  .muted{color:#a8ffc0cc}
  .dangerTxt{color:var(--danger);font-weight:700}
  .footer{opacity:.7;font-size:12px;text-align:center;margin:12px 0}
</style>
</head>
<body>
  <header><h1>📜 نظام الصيّاد -- Solo Leveling Style</h1></header>
  <div class="container">

    <!-- ألسنة -->
    <div class="tabs" role="tablist">
      <button class="tab-btn active" data-tab="status" role="tab" aria-selected="true">⚔️ الحالة</button>
      <button class="tab-btn" data-tab="quests" role="tab">🎯 المهام</button>
      <button class="tab-btn" data-tab="inventory" role="tab">🎒 الجرد</button>
      <button class="tab-btn" data-tab="log" role="tab">📢 النظام</button>
      <button class="tab-btn" data-tab="map" role="tab">🗺️ الخريطة</button>
    </div>

    <!-- الحالة -->
    <section id="tab-status" class="panel">
      <div class="grid grid-2">
        <div class="card">
          <h3>المستوى <span id="level">1</span> <span class="badge">XP: <span id="xp">0</span>/<span id="nextXp">100</span></span></h3>
          <div class="progress" aria-label="تقدم الخبرة"><span id="xpBar" style="width:0%"></span></div>
          <div class="row" style="margin-top:10px">
            <div class="card">
              <div class="stat"><b>HP</b><span id="hp">100</span></div>
              <div class="stat"><b>MP</b><span id="mp">100</span></div>
            </div>
            <div class="card">
              <div class="stat"><b>ATK</b><span id="atk">10</span></div>
              <div class="stat"><b>DEF</b><span id="def">8</span></div>
              <div class="stat"><b>AGI</b><span id="agi">9</span></div>
              <div class="stat"><b>INT</b><span id="int">7</span></div>
            </div>
          </div>
          <div class="stat"><b>نقاط تطوير متاحة</b><span id="points">0</span></div>
          <div class="row">
            <button class="btn" data-alloc="atk">+ ATK</button>
            <button class="btn" data-alloc="def">+ DEF</button>
            <button class="btn" data-alloc="agi">+ AGI</button>
            <button class="btn" data-alloc="int">+ INT</button>
          </div>
        </div>

        <div class="card">
          <h3>⚠️ مؤشر الخطر: <span id="dangerVal">0</span>%</h3>
          <div class="progress"><span id="dangerBar" style="width:0%"></span></div>
          <div class="kv" style="margin-top:10px">
            <div>الوقت:</div><div id="now"></div>
            <div>السرعة:</div><div><span id="speed">0.0</span> كم/س</div>
            <div>المسافة:</div><div><span id="distance">0</span></div>
            <div>البطارية:</div><div><span id="battery">--</span>%</div>
            <div>الموقع:</div><div class="muted" id="lastPos">--</div>
          </div>
          <div class="row" style="margin-top:8px">
            <button id="trackBtn" class="btn">▶️ ابدأ التتبع</button>
            <button id="resetBtn" class="btn danger">♻️ تصفير المسار</button>
          </div>
          <p class="muted" style="margin-top:8px">عند تجاوز 70% سيظهر تنبيه خطر باللون الأحمر.</p>
        </div>
      </div>
    </section>

    <!-- المهام -->
    <section id="tab-quests" class="panel" hidden>
      <div class="list" id="questsList"></div>
      <div class="row">
        <button id="addDaily" class="btn">➕ مهمة يومية (500م)</button>
        <button id="addSide" class="btn">➕ مهمة جانبية (2كم)</button>
      </div>
    </section>

    <!-- الجرد -->
    <section id="tab-inventory" class="panel" hidden>
      <div class="grid grid-2">
        <div class="card">
          <h3>العناصر</h3>
          <div class="list" id="items"></div>
        </div>
        <div class="card">
          <h3>المجهّز</h3>
          <p>سلاح: <span id="equippedWeapon">--</span></p>
          <p>مجموع ATK من السلاح: <span id="atkBonus">0</span></p>
        </div>
      </div>
    </section>

    <!-- سجل النظام -->
    <section id="tab-log" class="panel" hidden>
      <div class="row">
        <button id="exportBtn" class="btn">📄 تصدير السجل</button>
        <button id="clearLog" class="btn danger">🧹 مسح السجل</button>
      </div>
      <div id="log" class="log" aria-live="polite"></div>
    </section>

    <!-- الخريطة -->
    <section id="tab-map" class="panel" hidden>
      <div id="map"></div>
    </section>

    <p class="footer">ⓘ كل البيانات تُخزن محليًا على جهازك (LocalStorage). للسماح بالتتبع: وافق على إذن الموقع.</p>
  </div>

<script>
/* --- هنا كامل الجافاسكريبت كما في ملفك الأصلي (موجود بدون اختصار) --- */
</script>

<p class="footer">⚒️ الموقع قيد التطوير | للاستفسار: <b>1x_x.issam.x_x5</b></p>
</body>
</html>
